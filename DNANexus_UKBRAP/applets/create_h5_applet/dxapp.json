{
  "name": "create_h5_applet",
  "title": "Create H5 from MR DICOM",
  "summary": "Runs create_h5_MR_DICOM.py on UKB RAP",
  "dxapi": "1.0.0",
  "inputSpec": [
    {
      "name": "in_path",
      "label": "Input DICOM Directory",
      "class": "string",
      "help": "Directory containing the DICOM files (e.g., /Bulk/Heart MRI/Long axis/).",
      "patterns": [
        "*:/"
      ],
      "suggestions": [
        "/Bulk/Heart MRI/Long axis/"
      ]
    },
    {
      "name": "json_subs2ignore_file",
      "label": "JSON file of subjects to ignore (optional)",
      "class": "file",
      "optional": true,
      "help": "e.g., /soumick/processedH5s/subIDs_20208v3.json"
    },
    {
      "name": "dsV",
      "label": "Dataset version",
      "class": "string",
      "default": "OnlyV4",
      "help": "Dataset version (e.g., v1, v2, OnlyV4)"
    },
    {
      "name": "fID",
      "label": "Field ID",
      "class": "string",
      "default": "20208",
      "help": "Field ID (e.g., 20208)"
    },
    {
      "name": "fDirName",
      "label": "Output field directory name",
      "class": "string",
      "default": "F20208_Long_axis_heart_images_DICOM",
      "help": "Output field directory name (e.g., F20208_Long_axis_heart_images_DICOM)"
    }
  ],
  "outputSpec": [
    {
      "name": "output_files",
      "label": "Output Files",
      "class": "array:file",
      "help": "The folder containing one or more output files generated by the applet."
    }
  ],
  "runSpec": {
    "timeoutPolicy": {
      "*": {
        "hours": 48
      }
    },
    "interpreter": "bash",
    "file": "src/code.sh",
    "distribution": "Ubuntu",
    "release": "20.04",
    "version": "0",
    "execDepends": [
      { "name": "docker-ce-cli" },
      { "name": "wget" },
      { "name": "jq" }
    ],
    "executionPolicy": {
      "privileged": true
    }
  },
  "access": {
    "project": "CONTRIBUTE",
    "network": [
      "*"
    ]
  },
  "regionalOptions": {
    "aws:eu-west-2": {
      "systemRequirements": {
        "*": {
          "instanceType": "mem3_ssd1_v2_x4"
        }
      }
    }
  }
}

